<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:macro name="drivebase" params="mu mu2">
    <link
      name="base_link">
      <inertial>
        <origin
          xyz="0.0 0.0 -0.5"
          rpy="0 0 0" />
        <mass
          value="18.7" />
        <inertia
          ixx="0.5"
          ixy="0.0"
          ixz="0.0"
          iyy="0.62"
          iyz="0.0"
          izz="1.0" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh
            filename="file://$(find urc_hw_description)/urdf/meshes/base_link.STL" />
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <box size="21 24.5 8"/>
        </geometry>
      </collision>
    </link>

    <link
      name="left_rocker">
      <inertial>
        <origin
          xyz="0.0 0.0 0.12"
          rpy="0 0 0" />
        <mass
          value="3.2" />
        <inertia
          ixx="0.0"
          ixy="0.0"
          ixz="0.0"
          iyy="0.62"
          iyz="0.0"
          izz="0.62" />
      </inertial>
      <visual>
        <origin
          xyz="0.26 0.128 -0.01"
          rpy="0 0 0" />
        <geometry>
          <mesh
            filename="file://$(find urc_hw_description)/urdf/meshes/Left_Leg.STL" />
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0.26 0.128 -0.01"
          rpy="0 0 0" />
        <geometry>
          <box size="2 30.25 2"/>
        </geometry>
      </collision>
    </link>
    <joint
      name="left_rocker_joint"
      type="revolute">
      <origin
        xyz="-0.26 0.0 -0.128"
        rpy="1.5708 0 0" />
      <parent
        link="base_link" />
      <child
        link="left_rocker" />
      <axis
        xyz="-1 0 0" />
      <limit effort="0.0" lower="-0.24" upper="0.24" velocity="100.0" />
      <dynamics friction="1.0" damping="0.1" />
    </joint>

    <link
      name="front_left_wheel">
      <inertial>
        <origin
          xyz="-9.85790539753673E-07 -0.0424756522296364 1.28556895756526E-06"
          rpy="0 0 0" />
        <mass
          value="2.8404147429667" />
        <inertia
          ixx="0.0145900092361804"
          ixy="-9.4552077768867E-09"
          ixz="8.60523625668408E-08"
          iyy="0.0271163761346378"
          iyz="1.22920397171907E-08"
          izz="0.0145900654827055" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
      </collision>
      <surface>
        <friction>
          <ode>
            <mu>${mu}</mu>
            <mu2>${mu2}</mu2>
          </ode>
        </friction>
      </surface>
    </link>
    <joint
      name="front_left_wheel_joint"
      type="continuous">
      <origin
        xyz="-0.1 -0.236 -0.352"
        rpy="0.0 0.0 -1.5708" />
      <parent
        link="left_rocker" />
      <child
        link="front_left_wheel" />
      <axis
        xyz="0 -1 0" />
    </joint>

    <link
      name="back_left_wheel">
      <inertial>
        <origin
          xyz="0.0 0.0 0.0"
          rpy="0 0 0" />
        <mass
          value="1.4" />
        <inertia
          ixx="0.005"
          ixy="0.0"
          ixz="0"
          iyy="0.01"
          iyz="0.0"
          izz="0.005" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
      </collision>
      <surface>
        <friction>
          <ode>
            <mu>${mu}</mu>
            <mu2>${mu2}</mu2>
          </ode>
        </friction>
      </surface>
    </link>
    <joint
      name="back_left_wheel_joint"
      type="continuous">
      <origin
        xyz="-0.1 -0.232 0.358"
        rpy="0.0 -1.5708 -1.5708" />
      <parent
        link="left_rocker" />
      <child
        link="back_left_wheel" />
      <axis
        xyz="0 -1 0" />
    </joint>

    <link
      name="differential_bar">
      <inertial>
        <origin
          xyz="0.0001696304329344 0.0146364855896726 0.0184524262584146"
          rpy="0 0 0" />
        <mass
          value="0.8870349519636" />
        <inertia
          ixx="0.00029545831305288"
          ixy="6.25770619004021E-05"
          ixz="4.35881163876293E-08"
          iyy="0.00652074651602383"
          iyz="-2.01385937443393E-07"
          izz="0.00679287106362345" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh
            filename="file://$(find urc_hw_description)/urdf/meshes/Differential_Bar.STL" />
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <box size="21 1 3">
        </geometry>
      </collision>
    </link>
    <joint
      name="differential_bar_joint"
      type="revolute">
      <origin
        xyz="0 -0.37445 -0.070294"
        rpy="1.5708 0 0" />
      <parent
        link="base_link" />
      <child
        link="differential_bar" />
      <axis
        xyz="0 0 1" />
      <limit
        lower="0"
        upper="0"
        effort="0"
        velocity="0" />
      <dynamics damping="0.01" friction="0.01" />
    </joint>

    <joint
      name="diff_bar_right_rocker"
      type="fixed">
      <origin
        xyz="-0.26 -0.253 0.05" />
      <parent
        link="differential_bar" />
      <child
        link="right_rocker" />
      </joint> 

    <joint
      name="diff_bar_left_rocker"
      type="fixed">
      <origin
        xyz="0.26 -0.253 0.05" />
      <parent
        link="differential_bar" />
      <child
        link="left_rocker" />
      </joint> 

    <link
      name="right_rocker">
      <inertial>
        <origin
          xyz="0.0 0.0 0.12"
          rpy="0 0 0" />
        <mass
          value="3.2" />
        <inertia
          ixx="0.0"
          ixy="0.0"
          ixz="0.0"
          iyy="0.62"
          iyz="0.0"
          izz="0.62" />
      </inertial>
      <visual>
        <origin
          xyz="-0.26 0.138 0"
          rpy="0 0 0" />
        <geometry>
          <mesh
            filename="file://$(find urc_hw_description)/urdf/meshes/Right_Leg.STL" />
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="-0.26 0.138 0"
          rpy="0 0 0" />
        <geometry>
          <box size="2 30.25 2"/>
        </geometry>
      </collision>
    </link>
    <joint
      name="right_rocker_joint"
      type="revolute">
      <origin
        xyz="0.26 0.0 -0.128"
        rpy="1.5708 0 0" />
      <parent
        link="base_link" />
      <child
        link="right_rocker" />
      <axis
        xyz="1 0 0" />
      <limit effort="0.0" lower="-0.24" upper="0.24" velocity="100.0" />
      <dynamics damping="0.1" friction="1.0" />
    </joint>

    <link
      name="front_right_wheel">
      <inertial>
        <origin
          xyz="0.0 0.0 0.0"
          rpy="0 0 0" />
        <mass
          value="1.4" />
        <inertia
          ixx="0.005"
          ixy="0.0"
          ixz="0"
          iyy="0.01"
          iyz="0.0"
          izz="0.005" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
            <cylinder length="0.083" radius="0.1207"/>
        </geometry>
      </collision>
      <surface>
        <friction>
          <ode>
            <mu>${mu}</mu>
            <mu2>${mu2}</mu2>
          </ode>
        </friction>
      </surface>
    </link>
    <joint
      name="front_right_wheel_joint"
      type="continuous">
      <origin
        xyz="0.1 -0.2375 -0.35357"
        rpy="0.0 0.0 1.5708" />
      <parent
        link="right_rocker" />
      <child
        link="front_right_wheel" />
      <axis
        xyz="0 1 0" />
    </joint>

    <link
      name="back_right_wheel">
      <inertial>
        <origin
          xyz="-9.8607342807755E-07 -0.0424756522332874 1.28600934945489E-06"
          rpy="0 0 0" />
        <mass
          value="2.84041474188708" />
        <inertia
          ixx="0.0145900092368819"
          ixy="-9.45447451911223E-09"
          ixz="8.60519025479613E-08"
          iyy="0.0271163761346353"
          iyz="1.22923419163295E-08"
          izz="0.0145900654816172" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
        <material
          name="">
          <color
            rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
        </material>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <cylinder length="0.083" radius="0.1207"/>
        </geometry>
      </collision>
      <surface>
        <friction>
          <ode>
            <mu>${mu}</mu>
            <mu2>${mu2}</mu2>
          </ode>
        </friction>
      </surface>
    </link>
    <joint
      name="back_right_wheel_joint"
      type="continuous">
      <origin
        xyz="0.1 -0.232 0.357603754666081"
        rpy="0.0 0.0 1.5708" />
      <parent
        link="right_rocker" />
      <child
        link="back_right_wheel" />
      <axis
        xyz="0 1 0" />
    </joint>

    <gazebo reference="base_link">
      <material>Gazebo/Grey</material>
    </gazebo>
    <gazebo reference="left_rocker">
      <material>Gazebo/Grey</material>
    </gazebo>
    <gazebo reference="front_left_wheel">
      <material>Gazebo/Black</material>
    </gazebo>
    <gazebo reference="back_left_wheel">
      <material>Gazebo/Black</material>
    </gazebo>
    <gazebo reference="differential_bar">
      <material>Gazebo/Grey</material>
    </gazebo>
    <gazebo reference="right_rocker">
      <material>Gazebo/Grey</material>
    </gazebo>
    <gazebo reference="front_right_wheel">
      <material>Gazebo/Black</material>
    </gazebo>
    <gazebo reference="back_right_wheel">
      <material>Gazebo/Black</material>
    </gazebo>
  </xacro:macro>
</robot>
